(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{143:function(e,t,a){e.exports=a(375)},148:function(e,t,a){},150:function(e,t,a){},179:function(e,t){},375:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(89),l=a.n(r),c=(a(148),a(6)),s=a(7),i=a(10),m=a(8),d=a(9),u=a(19),p=a(63),h=a.n(p),f=(a(150),a(64)),g=a.n(f),E=(n.Component,a(90)),y=(a(193),["Gracias a los que donaron $amount estamos alcanzando la meta.","Los mexicanos somos grandes, $amount m\xe1s a la causa.","Como cuando miles de mexicanos se unen y aportan  $amount.","Logramos $amount m\xe1s. Muchas gracias.","Todas las aportaciones como esta de $amount ayudan a miles de familias.","$amount m\xe1s a nuestra causa.,  Vamos poco a poco llegando. $amount m\xe1s.","Esta meta est\xe1 por lograrse. $amount a la causa.","$amount m\xe1s que ayudar\xe1n a miles de ni\xf1os."," Miles de tratamientos ser\xe1n posibles gracias a estos $amount.","Casi 15 mil ni\xf1os se beneficiar\xe1n de estos $amount.","Nos emociona tanta ayuda. Recibimos otros $amount."]),v=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).formatMoney=function(e){return"$ "+(Math.round(100*e)/100).toLocaleString()},a.getMessage=function(e){var t=Math.floor(10*Math.random());return y[t].replace("$amount",a.formatMoney(e))},a.state={counter:0,delta:null,data:[]},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){h.a.init()}},{key:"componentDidMount",value:function(){var e=this;g.a.connect("wss://trax-teleton.herokuapp.com").on("donations",function(t){console.log("Donations",t);var a=localStorage.getItem("totalData");localStorage.setItem("totalData",parseInt(a)+parseInt(t.amount)),E.toast.info(e.getMessage(t.amount),{className:"notification"}),e.props.addToCollected(t.amount)})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(E.ToastContainer,null))}}]),t}(n.Component),x=a(91),S=(a(336),"rgb(153, 102, 255)"),b=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).formatMoney=function(e){return"$ "+(Math.round(100*e)/100).toLocaleString()},a.state={collected:localStorage.getItem("totalData")},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.current;return o.a.createElement("div",null,o.a.createElement("div",{"data-aos":"fade-right"},o.a.createElement("h1",{style:{color:"purple"}},"Cifra recolectada"),o.a.createElement("h2",{style:{color:"purple"}},this.formatMoney(e))),o.a.createElement(x.b,{duration:"1000000",data:{datasets:[{label:"Donaciones",backgroundColor:x.a.helpers.color(S).alpha(.5).rgbString(),fill:!0,lineTension:0,borderDash:[8,4],data:[]}]},options:{scales:{xAxes:[{type:"realtime",realtime:{duration:2e5,refresh:3e3,delay:2e3,pause:!1,ttl:2e5,onRefresh:function(e){e.data.datasets.forEach(function(e){e.data.push({x:Date.now(),y:Math.random()})})}}}]},plugins:{streaming:{frameRate:30}}}}))}}]),t}(n.Component),w=(n.Component,a(20)),N=a.n(w),j=a(142),M=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).getData=function(){fetch("https://trax-teleton.herokuapp.com/api/collected",{method:"get",mode:"cors"}).then(function(e){return e.json()}).then(function(e){var t=e[0].collected,n={x:Date.now(),y:t};localStorage.clear(),localStorage.setItem("totalData",t),a.setState({current:t,collected:[a.state.collected[0],n],rate:(a.state.expected-t)/a.state.expected*100})}).catch(function(e){console.log(e)}),fetch("https://trax-teleton.herokuapp.com/api/donations",{method:"get"}).then(function(e){return e.json()}).then(function(e){a.setState({hourOptions:a.groupBy(e,"hour")})}),fetch("https://trax-teleton.herokuapp.com/api/centers",{method:"get"}).then(function(e){return e.json()}).then(function(e){a.setState({centers:e})}).then(function(){return a.calculateCenters()})},a.groupBy=function(e,t){return e.reduce(function(e,a){return(e[a[t]]=e[a[t]]||[]).push(a),e},{})},a.addToCollected=function(e){var t=a.getLatestAmount()+e,n={x:Date.now(),y:t},o=a.state.collected.slice();a.setState({collected:[o,n],current:a.state.current+e}),a.calculateRate(),a.calculateCenters()},a.getLatestAmount=function(){var e=a.state.collected;return e[e.length-1].y},a.calculateCenters=function(){var e=a.state,t=e.centers,n=e.current,o=[];t.map(function(e){var t=e.proportion*n,a=t/e.needed_event;e.collected=t,e.accomplished=a,o.push(e)}),a.setState({centers:o})},a.calculateRate=function(){var e=a.state,t=e.expected,n=(t-e.current)/t;a.setState({rate:100*n});document.getElementById("root").style.setProperty("--growth",1-n)},a.state={collected:[{x:Date.now(),y:0}],expected:null,current:null,rate:null,hourOptions:[],centers:null,hourOption:"",hourDonations:[]},a.groupBy=a.groupBy.bind(Object(u.a)(Object(u.a)(a))),a.getDonationsByHour=a.getDonationsByHour.bind(Object(u.a)(Object(u.a)(a))),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){h.a.init(),this.getData(),this.setState({expected:456013740})}},{key:"getDonationsByHour",value:function(e){var t=this.state.hourOptions;this.setState({hourOption:e.target.value,hourDonations:t[e.target.value]})}},{key:"render",value:function(){var e=this.state,t=e.collected,a=e.expected,n=e.current,r=e.rate,l=e.centers,c=e.hourOptions,s=e.hourDonations;return o.a.createElement("div",{className:"App"},o.a.createElement("section",{id:"section01"},o.a.createElement("header",{className:"App-header0-1"},o.a.createElement("img",{style:{width:"150px"},alt:"trax",src:"http://static.vr3.io//vr3/trax/traxLogo.png"}),o.a.createElement("br",null),o.a.createElement("img",{alt:"trax",src:"http://static.vr3.io//vr3/trax/traxType2x.png"}))),o.a.createElement("section",{id:"section01"},o.a.createElement("div",{className:"lds-circle",style:{zIndex:10}}),o.a.createElement("header",{className:"App-header1"},o.a.createElement("h1",{"data-aos":"fade-right",style:{color:"purple",fontSize:"1.5em",alignSelf:"center"}},"\xbfC\xf3mo beneficia mi donaci\xf3n?"),o.a.createElement("div",{"data-aos":"fade-right",style:{padding:"40px",fontSize:"1.2em",color:"#92007b"}},o.a.createElement("h4",null,"Nuestra meta este a\xf1o"),o.a.createElement("h1",null,o.a.createElement(N.a,{value:a,displayType:"text",decimalScale:4,thousandSeparator:!0,prefix:"$"}))),o.a.createElement("div",{"data-aos":"fade-right",style:{color:"#ff6837"}},o.a.createElement("h4",null,"Hemos logrado"),o.a.createElement("h2",null,o.a.createElement(N.a,{value:n,displayType:"text",decimalScale:4,thousandSeparator:!0,prefix:"$"}))),o.a.createElement("div",{"data-aos":"fade-right",style:{}},o.a.createElement("h3",null," Falta ",parseFloat(r).toFixed(4)," %")),o.a.createElement("div",{className:"wrapper"},o.a.createElement("div",{className:"expected"}),o.a.createElement("div",{className:"collected-bg"}),o.a.createElement("div",{className:"collected"}),o.a.createElement("div",{className:"wires"})))),o.a.createElement("section",{id:"section02"},o.a.createElement("header",{className:"App-header1-1"},o.a.createElement("h1",{"data-aos":"fade-right",style:{color:"#ffcd6c",fontSize:"2em",textAlign:"center",alignSelf:"center"}},"\xbfA d\xf3nde van mis donaciones?")),o.a.createElement("header",{className:"App-header2"},o.a.createElement("div",{className:"App-header2-col"},l?l.map(function(e){return o.a.createElement("div",{className:"App-header2-row"},o.a.createElement("h2",null,e.center," - ",parseFloat(100*e.accomplished).toFixed(2),"%"),o.a.createElement("h4",{style:{color:"#ffcd6c"}},"Recaudado: ",o.a.createElement(N.a,{value:e.collected,displayType:"text",decimalScale:4,thousandSeparator:!0,prefix:"$"})),o.a.createElement("p",null,"Requerido: ",o.a.createElement(N.a,{value:e.needed_event,displayType:"text",decimalScale:4,thousandSeparator:!0,prefix:"$"})),o.a.createElement("small",{style:{color:"gray",fontSize:"0.75em"}},"Requerido 2018 ",o.a.createElement(N.a,{value:e.needed,displayType:"text",decimalScale:4,thousandSeparator:!0,prefix:"$"})),o.a.createElement(j.a,{percent:e.accomplished<=1?100*e.accomplished:100,strokeWidth:"6",strokeColor:"#ff9022"}))}):null))),o.a.createElement("section",{id:"section03"},o.a.createElement("header",{className:"App-header3"},o.a.createElement("div",{style:{width:"85vh"}},o.a.createElement(b,{collected:t,current:n})))),o.a.createElement("section",{id:"section04"},o.a.createElement("header",{className:"App-header4"},o.a.createElement("div",{"data-aos":"fade-right"},o.a.createElement("h1",{style:{color:"purple",fontSize:"1.5em",textAlign:"left",alignSelf:"center"}},"Volumen de donaciones por estado")),o.a.createElement("iframe",{width:"800",height:"600",src:"https://app.powerbi.com/view?r=eyJrIjoiNWI1ZTU2M2UtZmE3Yy00MmM2LThlNmQtMDZhNDczODA5MTYzIiwidCI6IjYxYmFkNGJiLWUwNTMtNDc1ZC04ZGI4LWQwMTZkYzk1NGVhNiIsImMiOjN9",frameborder:"0",allowFullScreen:"true"})),o.a.createElement("header",{className:"App-header3"},o.a.createElement("div",{"data-aos":"fade-right"},o.a.createElement("h1",{style:{color:"purple",fontSize:"1.5em",textAlign:"left",alignSelf:"center"}},"Distribuci\xf3n de Ingresos por Demanda para enfermedades")),o.a.createElement("iframe",{width:"800",height:"600",src:"https://app.powerbi.com/view?r=eyJrIjoiNWUxM2FmNjMtMTFlNy00YjFkLTg1ZjgtYzZjMDY1M2Y5NGJlIiwidCI6IjYxYmFkNGJiLWUwNTMtNDc1ZC04ZGI4LWQwMTZkYzk1NGVhNiIsImMiOjN9",frameborder:"0",allowFullScreen:"true"}))),o.a.createElement("section",{id:"section04"},o.a.createElement("header",{className:"App-header5"},o.a.createElement("h1",{"data-aos":"fade-right",style:{color:"#ffcd6c",fontSize:"2em",textAlign:"center",alignSelf:"center"}},"Consulta las donaciones por hora"),o.a.createElement("select",{style:{backgroundColor:"#ffcb4e",color:"purple",width:"400px",height:"200px",fontSize:"3em",alignItems:"center",justifyContent:"center"},onChange:this.getDonationsByHour},c?o.a.createElement(o.a.Fragment,null,o.a.createElement("option",{value:"2200"},"2200"),o.a.createElement("option",{value:"2355"},"2355"),o.a.createElement("option",{value:"2355"},"2400")):null),o.a.createElement("div",null,s?s.map(function(e){return o.a.createElement("div",null,o.a.createElement("h5",{style:{color:"white",fontSize:"1em"}},"".concat(e.date," - Hora: ").concat(e.hour)),o.a.createElement(N.a,{style:{color:"white",fontSize:"1.5em"},value:e.amount,displayType:"text",decimalScale:4,thousandSeparator:!0,prefix:"$"}))}):null))),o.a.createElement(v,{addToCollected:this.addToCollected}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[143,2,1]]]);
//# sourceMappingURL=main.0e3692ff.chunk.js.map